[
  {
    "op": "core/recon",
    "engineConfig": {
      "facets": [],
      "mode": "row-based"
    },
    "columnName": "autonomousCommunity",
    "config": {
      "mode": "standard-service",
      "service": "https://wikidata.reconci.link/en/api",
      "identifierSpace": "http://www.wikidata.org/entity/",
      "schemaSpace": "http://www.wikidata.org/prop/direct/",
      "type": {
        "id": "Q10742",
        "name": "autonomous community of Spain"
      },
      "autoMatch": true,
      "batchSize": 10,
      "columnDetails": [],
      "limit": 0
    },
    "description": "Reconcile cells in column 'autonomousCommunity' with Wikidata type 'Q10742'"
  },
  {
    "op": "core/recon",
    "engineConfig": {
      "facets": [],
      "mode": "row-based"
    },
    "columnName": "country",
    "config": {
      "mode": "standard-service",
      "service": "https://wikidata.reconci.link/en/api",
      "identifierSpace": "http://www.wikidata.org/entity/",
      "schemaSpace": "http://www.wikidata.org/prop/direct/",
      "type": {
        "id": "Q6256",
        "name": "country"
      },
      "autoMatch": true,
      "batchSize": 10,
      "columnDetails": [],
      "limit": 0
    },
    "description": "Reconcile cells in column 'country' with Wikidata type 'Q6256'"
  },
  {
    "op": "core/recon-judge-similar-cells",
    "engineConfig": {
      "facets": [],
      "mode": "row-based"
    },
    "columnName": "country",
    "similarValue": "Spain",
    "judgment": "matched",
    "match": {
      "id": "Q29",
      "name": "Spain",
      "types": [
        ""
      ],
      "score": 100
    },
    "shareNewTopics": false,
    "description": "Match the element 'Spain' ('Q29') for cells containing 'Spain' in the 'country' column"
  },
  {
    "op": "core/column-addition",
    "engineConfig": {
      "facets": [],
      "mode": "row-based"
    },
    "baseColumnName": "country",
    "expression": "grel:\"https://wikidata.org/entity/\"+cell.recon.match.id",
    "onError": "set-to-blank",
    "newColumnName": "wikidataCountry",
    "columnInsertIndex": 10,
    "description": "Create the 'wikidataCountry' column in index 10 based on the 'country' column using the expression 'grel:\"https://wikidata.org/entity/\"+cell.recon.match.id'"
  },
  {
    "op": "core/column-addition",
    "engineConfig": {
      "facets": [],
      "mode": "row-based"
    },
    "baseColumnName": "autonomousCommunity",
    "expression": "grel:\"https://wikidata.org/entity/\"+cell.recon.match.id",
    "onError": "set-to-blank",
    "newColumnName": "wikidataAutonomousCommunity",
    "columnInsertIndex": 7,
    "description": "Create the 'wikidataAutonomousCommunity' column in index 7 based on the 'autonomousCommunity' column using the expression 'grel:\"https://wikidata.org/entity/\"+cell.recon.match.id'"
  },
  {
    "op": "core/recon",
    "engineConfig": {
      "facets": [],
      "mode": "row-based"
    },
    "columnName": "city",
    "config": {
      "mode": "standard-service",
      "service": "https://wikidata.reconci.link/en/api",
      "identifierSpace": "http://www.wikidata.org/entity/",
      "schemaSpace": "http://www.wikidata.org/prop/direct/",
      "type": {
        "id": "Q515",
        "name": "city"
      },
      "autoMatch": true,
      "batchSize": 10,
      "columnDetails": [],
      "limit": 0
    },
    "description": "Reconcile cells in column 'city' with Wikidata type 'Q515'"
  },
  {
    "op": "core/recon-judge-similar-cells",
    "engineConfig": {
      "facets": [],
      "mode": "row-based"
    },
    "columnName": "city",
    "similarValue": "Madrid",
    "judgment": "matched",
    "match": {
      "id": "Q2807",
      "name": "Madrid",
      "types": [
        "Q2074737",
        "Q1200957",
        "Q200250"
      ],
      "score": 100
    },
    "shareNewTopics": false,
    "description": "Match the element 'Madrid' ('Q2807') for cells containing 'Madrid' in the 'city' column"
  },
  {
    "op": "core/column-addition",
    "engineConfig": {
      "facets": [],
      "mode": "row-based"
    },
    "baseColumnName": "city",
    "expression": "grel:\"https://wikidata.org/entity/\"+cell.recon.match.id",
    "onError": "set-to-blank",
    "newColumnName": "wikidataCity",
    "columnInsertIndex": 16,
    "description": "Create the 'wikidataCity' column in index 16 based on the 'city' column using the expression 'grel:\"https://wikidata.org/entity/\"+cell.recon.match.id'"
  },
  {
    "op": "core/column-addition",
    "engineConfig": {
      "facets": [],
      "mode": "row-based"
    },
    "baseColumnName": "lat",
    "expression": "if(isNonBlank(value), if(isNonBlank(cells['long'].value), 'https://www.openstreetmap.org/?mlat=' + value + '&mlon=' + cells['long'].value + '#map=18/' + value + '/' + cells['long'].value, ''), '')",
    "onError": "set-to-blank",
    "newColumnName": "openStreetMapCoordinates",
    "columnInsertIndex": 15,
    "description": "Create the 'openStreetMapCoordinates' column in index 15 based on the 'lat' column using the expression 'if(isNonBlank(value), if(isNonBlank(cells['long'].value), 'https://www.openstreetmap.org/?mlat=' + value + '&mlon=' + cells['long'].value + '#map=18/' + value + '/' + cells['long'].value, ''), '')'"
  }
]
